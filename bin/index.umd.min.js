#!/usr/bin/env node
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("commander")):"function"==typeof define&&define.amd?define(["commander"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).program)}(this,function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}e=t(e);function u(e,t,n,o,r,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(o,r)}var o=require("fs"),r=require("chalk");var n=require("chalk"),s={success:function(e){return console.log(n.green.bold("\n ‚úÖ   ".concat(e,"\n")))},fail:function(e){return console.log(n.red.bold("\n ‚ùå   ".concat(e,"\n")))},info:function(e){return console.log(n.yellow("\n üåà   ".concat(e,"\n")))}},l=require("fs"),d=(require("commander"),require("download-git-repo")),p=require("ora"),f=require("handlebars");var _={"vue2+ts":{url:"https://github.com/13168335674/adi-cli-template-vue2-ts",downloadUrl:"https://github.com:13168335674/adi-cli-template-vue2-ts#main",description:"vue@2.6„ÄÅtypescript@3.9"},"vue3+ts2":{url:"https://github.com/13168335674/adi-cli-template-vue3-ts",downloadUrl:"https://github.com:13168335674/adi-cli-template-vue3-ts#main",description:"vue@3.x„ÄÅtypescript@3.9"},"vue2+vite":{url:"https://github.com/13168335674/js-module-demo",downloadUrl:"https://github.com:13168335674/js-module-demo#master",description:"vue@2.6„ÄÅvite@1.0-beta.3"}},i=require("inquirer");function a(){var c;return c=regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;var n=a;return new Promise(function(t,e){o.exists(n,function(e){e?(console.log(r.red("The ".concat(n," folder already exists in the current directory. Please try to use another project name!"))),process.exit(1)):t("")})});case 2:i.prompt([{name:"templateType",message:"which template type you need to create?",type:"list",choices:Object.keys(_)},{name:"description",message:"please enter a description:",default:a},{name:"author",message:"please enter a author:",default:"author"}]).then(function(e){var o,r,i,t=_[e.templateType].downloadUrl;o=a,t=t,r=e,(i=p("downloading template...")).start(),d(t,o,{clone:!0},function(e){e&&(i.fail(),s.fail("".concat(e,"download template fail,please check your network connection and try again")),process.exit(1)),i.succeed();var e={name:o,description:r.description,author:r.author},t="".concat(o,"/package.json"),n=l.readFileSync(t).toString(),n=f.compile(n)(e);l.writeFileSync(t,n),s.success("".concat(o," project created!")),s.info("cd ".concat(o," && yarn install"))})});case 3:case"end":return e.stop()}},e)}),(a=function(){var e=this,a=arguments;return new Promise(function(t,n){var o=c.apply(e,a);function r(e){u(o,t,n,r,i,"next",e)}function i(e){u(o,t,n,r,i,"throw",e)}r(void 0)})}).apply(this,arguments)}var c=new(require("cli-table"))({head:["name","description"],style:{head:["cyan"]}});function m(){var t,e;t=_,(e=Object.keys(t)).length?(e.forEach(function(e){c.push(["".concat(e),t[e].description])}),(e=c.toString())?(s.info("ÂΩìÂâçÊ®°ÊùøÂàóË°®: "),console.log("".concat(e,"\n"))):s.fail("Ê®°ÊùøÊñá‰ª∂‰∏çÂ≠òÂú®!")):s.fail("Ê®°ÊùøÊñá‰ª∂‰∏çÂ≠òÂú®!")}function h(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{useWatch:!1};v(g.resolve(__dirname,"../lib/cmd/build/","rollup.config.js"),{format:"es"}).then(function(e){var t=e.options;e.warnings.flush(),t.map(function(t){y.rollup(t).then(function(e){Promise.all(t.output.map(e.write)),n.useWatch&&y.watch(t)})})})}var v=require("rollup/dist/loadConfigFile.js"),g=require("path"),y=require("rollup"),b="1.3.10";console.log("\n\n    ___    ____  ____   ________    ____\n   /   |  / __ /  _/  / ____/ /   /  _/\n  / /| | / / / // /   / /   / /    / /\n / ___ |/ /_/ // /   / /___/ /____/ /\n/_/  |_/_____/___/   ____/_____/___/\n\n"),e.default.version(b,"-v, --version"),e.default.command("create <projectName>").description("create project").alias("c").action(function(e){return function(){return a.apply(this,arguments)}(e)}),e.default.command("list").description("view the list of templates").alias("l").action(function(){m()}),e.default.command("dev").description("dev server.").action(function(){process.env.NODE_ENV="development",h({useWatch:!0})}),e.default.command("build").description("build project.").action(function(){process.env.NODE_ENV="production",h({useWatch:!1})}),e.default.parse(process.argv),e.default.args.length||e.default.help()});
